@if (loadError) {
  <div class="error-wrapper">
    <mat-icon>error_outline</mat-icon>
    <p>{{ loadError }}</p>
    <button mat-stroked-button (click)="goBack()">Go Back</button>
  </div>
}

@if (application) {

<div class="details-wrapper">

  <mat-card class="details-card">

    <div class="header">

      <div class="avatar">
        <mat-icon>assignment</mat-icon>
      </div>

      <div>
        <h2>Room Application #{{ application.id }}</h2>
        <p class="subtitle">{{ application.dormName ?? 'Unknown Dorm' }}</p>
      </div>

    </div>

    <div class="info-grid">

      <div class="info-item">
        <span class="label">ID</span>
        <span>{{ application.id }}</span>
      </div>

      <div class="info-item">
        <span class="label">Student ID</span>
        <span>{{ application.studentId }}</span>
      </div>

      <div class="info-item">
        <span class="label">Dormitory</span>
        <span>{{ application.dormName ?? 'â€”' }}</span>
      </div>

      <div class="info-item">
        <span class="label">Date of Application</span>
        <span>{{ application.dateOfApplication | date }}</span>
      </div>

      <div class="info-item">
        <span class="label">Status</span>
        <span class="status-badge" [ngClass]="'status-' + application.status">
          {{ application.status }}
        </span>
      </div>

    </div>

    @if (isPrincipal) {
      <div class="principal-actions">

        @if (isResolved) {
          <div class="resolved-notice">
            <mat-icon>check_circle</mat-icon>
            <span>This application has been resolved</span>
          </div>
        }

        <div class="action-buttons">
          <button
            mat-raised-button
            color="primary"
            class="accept-btn"
            [disabled]="isResolved || actionInProgress"
            (click)="accept()">
            <mat-icon>check</mat-icon>
            Accept
          </button>

          <button
            mat-raised-button
            color="warn"
            class="reject-btn"
            [disabled]="isResolved || actionInProgress"
            (click)="reject()">
            <mat-icon>close</mat-icon>
            Reject
          </button>
        </div>

      </div>
    }

    <div class="actions">
      <button mat-stroked-button (click)="goBack()">
        Back
      </button>
    </div>

  </mat-card>

</div>

}
